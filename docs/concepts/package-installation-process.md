---
title: O que acontece quando um pacote é instalado?
description: Informações detalhadas sobre o processo de instalação do pacote
author: karann-msft
ms.author: karann
ms.date: 06/20/2019
ms.topic: conceptual
ms.openlocfilehash: 634c421499b06f6b62d88a95f8703614dec5ace8
ms.sourcegitcommit: 53b06e27bcfef03500a69548ba2db069b55837f1
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/19/2020
ms.locfileid: "97699762"
---
# <a name="what-happens-when-a-nuget-package-is-installed"></a><span data-ttu-id="3a565-103">O que acontece quando um pacote NuGet é instalado?</span><span class="sxs-lookup"><span data-stu-id="3a565-103">What happens when a NuGet package is installed?</span></span>

<span data-ttu-id="3a565-104">Em poucas palavras, as diferentes ferramentas NuGet normalmente criam uma referência a um pacote no arquivo de projeto ou em `packages.config`, depois executam uma restauração de pacote, o que efetivamente instala o pacote.</span><span class="sxs-lookup"><span data-stu-id="3a565-104">Simply said, the different NuGet tools typically create a reference to a package in the project file or `packages.config`, then perform a package restore, which effectively installs the package.</span></span> <span data-ttu-id="3a565-105">A exceção é `nuget install`, que apenas expande o pacote em uma pasta `packages` e não modifica nenhum outro arquivo.</span><span class="sxs-lookup"><span data-stu-id="3a565-105">The exception is `nuget install`, which only expands the package into a `packages` folder and does not modify any other files.</span></span>

<span data-ttu-id="3a565-106">O processo geral é o seguinte:</span><span class="sxs-lookup"><span data-stu-id="3a565-106">The general process is as follows:</span></span>

1. <span data-ttu-id="3a565-107">(Todas as ferramentas, exceto `nuget.exe`) Registre a versão e o identificador de pacote no arquivo de projeto ou em `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="3a565-107">(All tools except `nuget.exe`) Record the package identifier and version into the project file or `packages.config`.</span></span>

   <span data-ttu-id="3a565-108">Se a ferramenta de instalação for o Visual Studio ou a CLI do dotnet, primeiro a ferramenta tentará instalar o pacote.</span><span class="sxs-lookup"><span data-stu-id="3a565-108">If the installation tool is Visual Studio or the dotnet CLI, the tool first attempts to install the package.</span></span> <span data-ttu-id="3a565-109">Se ele for incompatível, o pacote não será adicionado ao arquivo de projeto nem a `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="3a565-109">If it's incompatible, the package is not added to the project file or `packages.config`.</span></span>

2. <span data-ttu-id="3a565-110">Adquira o pacote:</span><span class="sxs-lookup"><span data-stu-id="3a565-110">Acquire the package:</span></span>
   - <span data-ttu-id="3a565-111">Verifique se o pacote (pelo identificador exato ou pelo número da versão) já está instalado na pasta *global-packages* conforme descrito em [Como gerenciar as pastas de pacotes globais e de cache](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="3a565-111">Check if the package (by exact identifer and version number) is already installed in the *global-packages* folder as described on [Managing the global packages and cache folders](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span>

   - <span data-ttu-id="3a565-112">Se o pacote não estiver na pasta *global-Packages* , tente recuperá-lo das fontes listadas nos [arquivos de configuração](../consume-packages/Configuring-NuGet-Behavior.md).</span><span class="sxs-lookup"><span data-stu-id="3a565-112">If the package is not in the *global-packages* folder, attempt to retrieve it from the sources listed in the [configuration files](../consume-packages/Configuring-NuGet-Behavior.md).</span></span> <span data-ttu-id="3a565-113">Para fontes online, primeiro tente recuperar o pacote do cache HTTP, a menos que `-NoCache` seja especificado com comandos `nuget.exe` ou que `--no-cache` seja especificado com `dotnet restore`.</span><span class="sxs-lookup"><span data-stu-id="3a565-113">For online sources, attempt first to retrieve the package from the HTTP cache unless `-NoCache` is specified with `nuget.exe` commands or `--no-cache` is specified with `dotnet restore`.</span></span> <span data-ttu-id="3a565-114">(O Visual Studio e `dotnet add package` sempre usa o cache.) Se um pacote for usado do cache, "CACHE" aparecerá na saída.</span><span class="sxs-lookup"><span data-stu-id="3a565-114">(Visual Studio and `dotnet add package` always use the cache.) If a package is used from the cache, "CACHE" appears in the output.</span></span> <span data-ttu-id="3a565-115">O cache tem um tempo de expiração de 30 minutos.</span><span class="sxs-lookup"><span data-stu-id="3a565-115">The cache has an expiration time of 30 minutes.</span></span>

   - <span data-ttu-id="3a565-116">Se o pacote tiver sido especificado usando uma [versão flutuante](../consume-packages/Package-References-in-Project-Files.md#floating-versions)ou sem uma versão mínima, *o NuGet* entrará em contato com todas as fontes para descobrir a melhor correspondência.</span><span class="sxs-lookup"><span data-stu-id="3a565-116">If the package has been specified using a [floating version](../consume-packages/Package-References-in-Project-Files.md#floating-versions), or without a minimum version, NuGet *will* contact all sources to figure out the best match.</span></span>
   <span data-ttu-id="3a565-117">Exemplo: `1.*` , `(, 2.0.0]` .</span><span class="sxs-lookup"><span data-stu-id="3a565-117">Example: `1.*`, `(, 2.0.0]`.</span></span>

   - <span data-ttu-id="3a565-118">Se o pacote não estiver no cache HTTP, tente baixá-lo nas fontes listadas na configuração.</span><span class="sxs-lookup"><span data-stu-id="3a565-118">If the package is not in the HTTP cache, attempt to download it from the sources listed in the configuration.</span></span> <span data-ttu-id="3a565-119">Se um pacote for baixado, "GET" e "OK" serão exibidos na saída.</span><span class="sxs-lookup"><span data-stu-id="3a565-119">If a package is downloaded, "GET" and "OK" appear in the output.</span></span> <span data-ttu-id="3a565-120">O NuGet registra o tráfego HTTP em log no nível de detalhes normal.</span><span class="sxs-lookup"><span data-stu-id="3a565-120">NuGet logs http traffic on normal verbosity.</span></span>

   - <span data-ttu-id="3a565-121">Se o pacote não puder ser adquirido com êxito de nenhuma fonte, a instalação falhará neste ponto com um erro como [NU1103](../reference/errors-and-warnings/NU1103.md).</span><span class="sxs-lookup"><span data-stu-id="3a565-121">If the package cannot be successfully acquired from any sources, installation fails at this point with an error such as [NU1103](../reference/errors-and-warnings/NU1103.md).</span></span> <span data-ttu-id="3a565-122">Os erros de comandos `nuget.exe` mostram apenas a última fonte selecionada, mas implicam que o pacote não estava disponível de nenhuma fonte.</span><span class="sxs-lookup"><span data-stu-id="3a565-122">Note that errors from `nuget.exe` commands show only the last source checked, but implies that the package wasn't available from any source.</span></span>

   <span data-ttu-id="3a565-123">Na aquisição do pacote, a ordem das fontes na configuração do NuGet pode ser aplicável:</span><span class="sxs-lookup"><span data-stu-id="3a565-123">When acquiring the package, the order of sources in the NuGet configuration may apply:</span></span>

   - <span data-ttu-id="3a565-124">O NuGet verifica a pasta local de fontes e os compartilhamentos de rede antes de verificar as fontes HTTP.</span><span class="sxs-lookup"><span data-stu-id="3a565-124">NuGet checks sources local folder and network shares before checking HTTP sources.</span></span>

3. <span data-ttu-id="3a565-125">Salve uma cópia do pacote e outras informações na pasta *http-cache*, conforme descrito em [Como gerenciar os pacotes globais e as pastas de cache](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="3a565-125">Save a copy of the package and other information in the *http-cache* folder as described on [Managing the global packages and cache folders](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span>

4. <span data-ttu-id="3a565-126">Se o pacote for baixado, instale-o na pasta *global-packages* por usuário.</span><span class="sxs-lookup"><span data-stu-id="3a565-126">If downloaded, install the package into the per-user *global-packages* folder.</span></span> <span data-ttu-id="3a565-127">O NuGet cria uma subpasta para cada identificador de pacote e, em seguida, cria subpastas para cada versão instalada do pacote.</span><span class="sxs-lookup"><span data-stu-id="3a565-127">NuGet creates a subfolder for each package identifier, then creates subfolders for each installed version of the package.</span></span>

5. <span data-ttu-id="3a565-128">O NuGet instala as dependências do pacote conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="3a565-128">NuGet installs package dependencies as required.</span></span> <span data-ttu-id="3a565-129">Esse processo pode atualizar versões do pacote, conforme descrito em [Resolução de dependências](../concepts/dependency-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="3a565-129">This process might update package versions in the process, as described in [Dependency Resolution](../concepts/dependency-resolution.md).</span></span>

6. <span data-ttu-id="3a565-130">Atualize outros arquivos de projeto e pastas:</span><span class="sxs-lookup"><span data-stu-id="3a565-130">Update other project files and folders:</span></span>

    - <span data-ttu-id="3a565-131">Em caso de projetos que usam PackageReference, atualize o grafo de dependência do pacote armazenado em `obj/project.assets.json`.</span><span class="sxs-lookup"><span data-stu-id="3a565-131">For projects using PackageReference, update the package dependency graph stored in `obj/project.assets.json`.</span></span> <span data-ttu-id="3a565-132">O conteúdo do pacote em si não é copiado para nenhuma pasta de projeto.</span><span class="sxs-lookup"><span data-stu-id="3a565-132">Package contents themselves are not copied into any project folder.</span></span>
    - <span data-ttu-id="3a565-133">Atualize `app.config` e/ou `web.config` se o pacote usar [transformações de origem e arquivo de configuração](../create-packages/source-and-config-file-transformations.md).</span><span class="sxs-lookup"><span data-stu-id="3a565-133">Update `app.config` and/or `web.config` if the package uses [source and config file transformations](../create-packages/source-and-config-file-transformations.md).</span></span>

7. <span data-ttu-id="3a565-134">(Somente no Visual Studio) Exiba o arquivo Leiame do pacote, se disponível, em uma janela do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="3a565-134">(Visual Studio only) Display the package's readme file, if available, in a Visual Studio window.</span></span>

<span data-ttu-id="3a565-135">Aproveite sua programação produtiva com pacotes do NuGet.</span><span class="sxs-lookup"><span data-stu-id="3a565-135">Enjoy your productive coding with NuGet packages!</span></span>
